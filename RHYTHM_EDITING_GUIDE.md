# 节奏编辑指南

## 快速开始

本指南教你如何通过编辑`rhythm-patterns.json`文件来自定义游戏节奏。

## JSON文件位置

文件路径: `rhythm-patterns.json`(项目根目录)

## 基本结构

```json
{
  "rhythmLibrary": {
    "模式ID": {
      "name": "显示名称",
      "difficulty": "难度级别",
      "bpm": 节拍速度,
      "timeSignature": "节拍",
      "tracks": {
        "0": "轨道0的模式",
        "1": "轨道1的模式",
        "2": "轨道2的模式",
        "3": "轨道3的模式"
      },
      "description": "模式描述"
    }
  }
}
```

## 参数说明

### 1. 模式ID (patternId)
- 英文字母和下划线组成
- 每个模式必须有唯一的ID
- 示例: `"basic"`, `"fast_rhythm"`, `"expert_mode"`

### 2. name (显示名称)
- 在游戏中显示的名称
- 可以使用中文
- 示例: `"基础4拍节奏"`, `"疯狂节奏"`

### 3. difficulty (难度级别)
- 可选值: `"easy"`, `"medium"`, `"hard"`, `"expert"`
- 影响游戏中的显示和筛选

### 4. bpm (每分钟节拍数)
- 范围: 40-200
- 数值越大节奏越快
- 常用值:
  - 慢速: 60-90
  - 中速: 100-130
  - 快速: 140-180

### 5. timeSignature (拍号)
- 常用: `"4/4"` (四四拍)
- 其他: `"3/4"`, `"6/8"` 等

### 6. tracks (轨道模式)
- 4条轨道(0-3)
- 每条轨道用一个字符串定义
- 字符串长度建议16或32位

### 7. description (描述)
- 模式的简短说明
- 帮助玩家理解节奏特点

## 轨道模式字符串

### 符号说明

| 符号 | 含义 | 视觉效果 |
|------|------|----------|
| `X` | 强音符 | 亮色+金色边框 |
| `x` | 弱音符 | 暗色+灰色边框 |
| `-` | 休止符 | 不生成音符 |

### 示例解读

```
"X---X---X---X---"
```
- 16个时间单位
- 在第1、5、9、13位置有强音符
- 模拟4/4拍的基础节奏

```
"X-X-X-X-X-X-X-X-"
```
- 8分音符节奏
- 密度更高,更有挑战

```
"X--x-X--x-X--x--"
```
- 强弱交替
- 有层次感的节奏

## 实际例子

### 简单节奏
```json
{
  "easy_start": {
    "name": "入门节奏",
    "difficulty": "easy",
    "bpm": 80,
    "timeSignature": "4/4",
    "tracks": {
      "0": "X-------X-------",
      "1": "--------X-------",
      "2": "----------------",
      "3": "----------------"
    },
    "description": "只使用前两条轨道的慢速节奏"
  }
}
```

### 中等难度
```json
{
  "medium_challenge": {
    "name": "挑战节奏",
    "difficulty": "medium",
    "bpm": 120,
    "timeSignature": "4/4",
    "tracks": {
      "0": "X---X---X---X---",
      "1": "----X-------X---",
      "2": "--X-------X-----",
      "3": "------X-------X-"
    },
    "description": "四条轨道交替,需要快速反应"
  }
}
```

### 高难度
```json
{
  "extreme_speed": {
    "name": "极限速度",
    "difficulty": "expert",
    "bpm": 180,
    "timeSignature": "4/4",
    "tracks": {
      "0": "X-X-X-X-X-X-X-X-",
      "1": "-X-X-X-X-X-X-X-X",
      "2": "X---X---X---X---",
      "3": "--X---X---X---X-"
    },
    "description": "高速8分音符混合,考验极限"
  }
}
```

## 设计技巧

### 1. 从简单开始
- 先设计2条轨道的简单模式
- 逐步增加复杂度

### 2. 保持节奏感
- 遵循音乐规律
- 避免随机分布
- 考虑玩家的手指移动

### 3. 难度渐进
- easy: 慢速,少量音符
- medium: 中速,中等密度
- hard: 快速,高密度
- expert: 极限速度,复杂模式

### 4. 测试调整
- 添加模式后实际试玩
- 根据体验调整BPM和模式
- 确保可玩性

### 5. 字符串长度建议
- 16位: 简单模式
- 32位: 复杂模式
- 保持2的幂次(便于循环)

## 完整示例

```json
{
  "rhythmLibrary": {
    "beginner": {
      "name": "初学者",
      "difficulty": "easy",
      "bpm": 60,
      "timeSignature": "4/4",
      "tracks": {
        "0": "X---------------",
        "1": "----X-----------",
        "2": "--------X-------",
        "3": "------------X---"
      },
      "description": "超慢速,一次只有一个音符"
    },
    
    "normal": {
      "name": "标准模式",
      "difficulty": "medium",
      "bpm": 120,
      "timeSignature": "4/4",
      "tracks": {
        "0": "X---X---X---X---",
        "1": "----X---X---X---",
        "2": "--------X---X---",
        "3": "------------X---"
      },
      "description": "经典的4拍节奏"
    },
    
    "pro": {
      "name": "专业级",
      "difficulty": "hard",
      "bpm": 160,
      "timeSignature": "4/4",
      "tracks": {
        "0": "X-X-X-X-X-X-X-X-",
        "1": "-X-X-X-X-X-X-X-X",
        "2": "X---X---X---X---",
        "3": "----X---X---X---"
      },
      "description": "8分音符的快节奏"
    }
  },
  
  "visualization": {
    "symbols": {
      "X": "强音符",
      "x": "弱音符",
      "-": "休止符"
    },
    "colors": {
      "0": "#FF6B6B",
      "1": "#4ECDC4",
      "2": "#45B7D1",
      "3": "#96CEB4"
    }
  }
}
```

## 常见问题

### Q: 如何添加新模式?
A: 在`rhythmLibrary`中添加新的键值对,使用唯一的ID。

### Q: 可以修改轨道颜色吗?
A: 可以,在`visualization.colors`中修改对应轨道的颜色值(十六进制)。

### Q: BPM设置多少合适?
A: 
- 新手: 60-90
- 普通玩家: 100-130  
- 高手: 140-180

### Q: 如何让节奏更有挑战?
A: 增加BPM、增加音符密度、使用更多轨道、添加不规则模式。

### Q: 修改后需要重新编译吗?
A: 不需要!只需刷新游戏即可看到新的节奏。

## 在线工具(建议)

未来可以开发以下工具:
- 可视化节奏编辑器
- BPM计算器
- 节奏预览工具
- 模式生成器

## 分享你的节奏

创建了优秀的节奏模式?可以:
1. 导出你的JSON配置
2. 与其他玩家分享
3. 制作节奏包

---

祝你创作出精彩的节奏!
