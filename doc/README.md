# 项目文档目录

本目录包含节奏游戏项目的完整文档，分为原始需求和策略文档两个部分。

## 目录结构

```
doc/
├── README.md                    # 本文件
├── or/                          # 原始需求文档
│   ├── 项目需求说明.md           # 详细的项目需求说明书
│   └── 功能清单.md              # 功能模块清单和完成状态
└── strategy/                    # 策略文档
    ├── 架构设计策略.md           # 整体架构和设计模式
    ├── 核心功能实现策略.md       # 核心功能的具体实现方案
    └── 优化与扩展策略.md         # 性能优化和功能扩展方案
```

## 文档说明

### 📋 原始需求文档 (doc/or/)

存储项目的原始需求和功能定义，包括：

#### 1. 项目需求说明.md
详细描述了项目的完整需求，包括：
- **项目概述**：背景、目标
- **核心功能需求**：游戏界面、玩法、判定、评分等
- **技术需求**：平台、性能、数据管理
- **用户体验需求**：易用性、可访问性、趣味性
- **非功能性需求**：稳定性、可维护性、可测试性
- **约束条件**：技术、性能、资源约束
- **未来扩展需求**：音乐同步、谱面系统、社交功能等

#### 2. 功能清单.md
提供了项目的功能模块清单，包括：
- **已实现功能**：详细列出所有已完成的功能模块
- **功能状态**：使用checkbox标记完成状态
- **待实现功能**：列出未来扩展的功能点
- **统计信息**：功能完成度统计

### 🎯 策略文档 (doc/strategy/)

存储项目的实现策略和技术方案，包括：

#### 1. 架构设计策略.md
描述项目的整体架构设计，包括：
- **架构模式**：MVC变体、分层设计
- **设计模式应用**：单例、对象池、策略、观察者等
- **数据流设计**：单向数据流、状态同步
- **模块化设计**：目录结构、依赖关系
- **渲染策略**：分层渲染、性能优化
- **输入处理**：多输入源统一、事件防抖
- **扩展性设计**：插件化、接口预留

#### 2. 核心功能实现策略.md
详细说明核心功能的实现方案，包括：
- **节拍生成与同步**：时间同步、下落计算、多种模式
- **判定系统**：判定算法、命中检测、MISS检测
- **评分系统**：分数计算、连击加成、精度统计
- **输入处理**：多输入源、防重复、响应优化
- **反馈系统**：音效、震动、视觉反馈
- **性能优化**：对象池、渲染优化、内存管理
- **边界情况处理**：极端BPM、高密度、数据加载失败

#### 3. 优化与扩展策略.md
提供性能优化和功能扩展的方案，包括：
- **性能优化**：
  - 渲染优化：分层Canvas、离屏预渲染、批量绘制
  - 内存优化：对象池限制、资源管理、定时清理
  - 计算优化：缓存、查找表、算法改进
  - 帧率优化：自适应降级
- **代码质量优化**：
  - 错误处理：防御性编程、降级方案
  - 日志系统：分级日志
  - 性能监控：指标收集
- **功能扩展**：
  - 音乐同步：BPM检测、精确同步
  - 谱面编辑器：可视化编辑、导入导出
  - 排行榜系统：分数提交、排名查询
  - 成就系统：条件检测、解锁通知
  - 主题皮肤：配色方案、样式切换
- **调试与测试**：
  - 可视化调试工具
  - 自动化测试
  - 性能压力测试

## 使用指南

### 阅读顺序建议

**新手入门：**
1. 先阅读 `or/项目需求说明.md` 了解项目整体需求
2. 浏览 `or/功能清单.md` 了解功能模块划分
3. 阅读 `strategy/架构设计策略.md` 理解整体架构
4. 根据需要查阅具体的实现策略文档

**开发人员：**
1. 查看 `or/功能清单.md` 确定开发任务
2. 参考 `strategy/核心功能实现策略.md` 了解实现细节
3. 参考 `strategy/架构设计策略.md` 保持代码一致性
4. 遇到性能问题时查阅 `strategy/优化与扩展策略.md`

**维护人员：**
1. 通过 `strategy/架构设计策略.md` 了解系统结构
2. 使用 `strategy/优化与扩展策略.md` 中的调试工具
3. 参考优化策略解决性能问题

**产品经理：**
1. 阅读 `or/项目需求说明.md` 了解产品定位
2. 查看 `or/功能清单.md` 了解功能完成情况
3. 参考 `strategy/优化与扩展策略.md` 规划未来功能

## 文档维护

### 更新原则

1. **需求文档（or/）**：
   - 当有新的需求变更时更新
   - 保持需求的准确性和完整性
   - 记录变更历史

2. **策略文档（strategy/）**：
   - 当架构或实现方案发生重大变化时更新
   - 添加新的优化方案和扩展方案
   - 记录实践经验和最佳实践

### 版本控制

每个文档都包含版本信息和更新日期：
- **文档版本**：遵循语义化版本（如 v1.0, v1.1）
- **创建日期**：文档首次创建日期
- **最后更新**：最近一次修改日期

### 贡献指南

如需更新文档，请遵循以下规范：
1. 保持文档格式统一
2. 使用清晰的标题层级
3. 添加必要的代码示例和图表
4. 更新版本信息和更新日期
5. 在文档顶部添加变更摘要（如适用）

## 相关资源

### 项目文档
- **项目根目录 README.md**：项目整体介绍和快速开始
- **README_RHYTHM.md**：节奏游戏功能说明
- **js/rhythm/README_INTEGRATION.md**：节奏数据格式集成说明

### 配置文件
- **game.json**：游戏运行时配置
- **project.config.json**：项目配置
- **rhythm-patterns.json**：节奏模式库配置

### 代码文档
建议查看以下关键文件的代码注释：
- `js/main.js` - 主控制器
- `js/databus.js` - 数据总线
- `js/rhythm/beatgenerator.js` - 节拍生成器
- `js/rhythm/note.js` - 节拍对象

## 反馈与支持

如有文档方面的问题或建议，请：
1. 查看相关文档确认是否已有说明
2. 检查代码实现与文档是否一致
3. 提交issue或反馈，注明文档位置和问题描述

---

**文档目录版本**：v1.0  
**创建日期**：2025-10-12  
**最后更新**：2025-10-12  
**文档作者**：AI Assistant (Claude)
